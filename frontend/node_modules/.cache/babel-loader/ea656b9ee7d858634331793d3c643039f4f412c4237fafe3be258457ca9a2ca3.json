{"ast":null,"code":"/**\n * Chat History Service\n * Handles all chat session operations with Supabase backend\n */\n\nclass ChatHistoryService {\n  constructor() {\n    this.baseUrl = 'http://localhost:5001/api/chat';\n  }\n\n  // Generate a unique ID for sessions\n  generateId() {\n    return Date.now().toString(36) + Math.random().toString(36).substr(2);\n  }\n\n  // Generate a title from the first user message\n  generateTitle(messages) {\n    const firstUserMessage = messages.find(msg => msg.role === 'user');\n    if (firstUserMessage) {\n      const text = firstUserMessage.text;\n      return text.length > 50 ? text.substring(0, 50) + '...' : text;\n    }\n    return 'New Chat';\n  }\n\n  // Format timestamp for display\n  formatTimestamp(timestamp) {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffInHours = (now - date) / (1000 * 60 * 60);\n    if (diffInHours < 1) {\n      return 'Just now';\n    } else if (diffInHours < 24) {\n      return `${Math.floor(diffInHours)}h ago`;\n    } else if (diffInHours < 168) {\n      // 7 days\n      return `${Math.floor(diffInHours / 24)}d ago`;\n    } else {\n      return date.toLocaleDateString();\n    }\n  }\n\n  // Save a chat session\n  async saveSession(sessionData) {\n    try {\n      const response = await fetch(`${this.baseUrl}/sessions`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          title: sessionData.title || this.generateTitle(sessionData.messages),\n          messages: sessionData.messages || []\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const result = await response.json();\n      if (result.success) {\n        console.log('✅ Session saved to backend:', result.session);\n        return result.session;\n      } else {\n        throw new Error(result.error || 'Failed to save session');\n      }\n    } catch (error) {\n      console.error('❌ Failed to save session to backend:', error);\n      // Fallback to localStorage\n      const id = sessionData.id || this.generateId();\n      const session = {\n        id,\n        title: sessionData.title || this.generateTitle(sessionData.messages),\n        type: sessionData.type || 'chat',\n        messages: sessionData.messages || [],\n        message_count: sessionData.messages ? sessionData.messages.length : 0,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n      };\n      const history = await this.getHistory();\n      history.unshift(session);\n      localStorage.setItem('gsu_chat_history', JSON.stringify(history));\n      console.log('✅ Session saved to localStorage:', id);\n      return session;\n    }\n  }\n\n  // Get all chat sessions\n  async getHistory() {\n    try {\n      const response = await fetch(`${this.baseUrl}/sessions`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const result = await response.json();\n      if (result.success) {\n        console.log('✅ History loaded from backend:', result.sessions.length, 'sessions');\n        return result.sessions;\n      } else {\n        throw new Error(result.error || 'Failed to load history');\n      }\n    } catch (error) {\n      console.error('❌ Failed to load history from backend:', error);\n      // Fallback to localStorage\n      const history = localStorage.getItem('gsu_chat_history');\n      const parsed = history ? JSON.parse(history) : [];\n      console.log('✅ History loaded from localStorage:', parsed.length, 'sessions');\n      return parsed;\n    }\n  }\n\n  // Get a specific session by ID\n  async getSession(sessionId) {\n    try {\n      const response = await fetch(`${this.baseUrl}/sessions/${sessionId}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const result = await response.json();\n      if (result.success) {\n        console.log('✅ Session loaded from backend:', result.session.id);\n        return result.session;\n      } else {\n        throw new Error(result.error || 'Failed to load session');\n      }\n    } catch (error) {\n      console.error('❌ Failed to get session from backend:', error);\n      // Fallback to localStorage\n      const history = await this.getHistory();\n      return history.find(session => session.id === sessionId);\n    }\n  }\n\n  // Update a session\n  async updateSession(sessionId, updates) {\n    try {\n      const response = await fetch(`${this.baseUrl}/sessions/${sessionId}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(updates)\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const result = await response.json();\n      if (result.success) {\n        console.log('✅ Session updated in backend:', sessionId);\n        return true;\n      } else {\n        throw new Error(result.error || 'Failed to update session');\n      }\n    } catch (error) {\n      console.error('❌ Failed to update session in backend:', error);\n      // Fallback to localStorage\n      const history = await this.getHistory();\n      const sessionIndex = history.findIndex(session => session.id === sessionId);\n      if (sessionIndex > -1) {\n        history[sessionIndex] = {\n          ...history[sessionIndex],\n          ...updates\n        };\n        localStorage.setItem('gsu_chat_history', JSON.stringify(history));\n        console.log('✅ Session updated in localStorage:', sessionId);\n        return true;\n      }\n      return false;\n    }\n  }\n\n  // Delete a session\n  async deleteSession(sessionId) {\n    try {\n      const response = await fetch(`${this.baseUrl}/sessions/${sessionId}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const result = await response.json();\n      if (result.success) {\n        console.log('✅ Session deleted from backend:', sessionId);\n        return true;\n      } else {\n        throw new Error(result.error || 'Failed to delete session');\n      }\n    } catch (error) {\n      console.error('❌ Failed to delete session from backend:', error);\n      // Fallback to localStorage\n      const history = await this.getHistory();\n      const filteredHistory = history.filter(session => session.id !== sessionId);\n      localStorage.setItem('gsu_chat_history', JSON.stringify(filteredHistory));\n      console.log('✅ Session deleted from localStorage:', sessionId);\n      return true;\n    }\n  }\n}\nexport default new ChatHistoryService();","map":{"version":3,"names":["ChatHistoryService","constructor","baseUrl","generateId","Date","now","toString","Math","random","substr","generateTitle","messages","firstUserMessage","find","msg","role","text","length","substring","formatTimestamp","timestamp","date","diffInHours","floor","toLocaleDateString","saveSession","sessionData","response","fetch","method","headers","body","JSON","stringify","title","ok","Error","status","result","json","success","console","log","session","error","id","type","message_count","created_at","toISOString","updated_at","history","getHistory","unshift","localStorage","setItem","sessions","getItem","parsed","parse","getSession","sessionId","updateSession","updates","sessionIndex","findIndex","deleteSession","filteredHistory","filter"],"sources":["/Users/jasnoorsandhu51/Documents/Software-Engineering-Team-6/frontend/src/services/chatHistoryService.js"],"sourcesContent":["/**\n * Chat History Service\n * Handles all chat session operations with Supabase backend\n */\n\nclass ChatHistoryService {\n  constructor() {\n    this.baseUrl = 'http://localhost:5001/api/chat';\n  }\n\n  // Generate a unique ID for sessions\n  generateId() {\n    return Date.now().toString(36) + Math.random().toString(36).substr(2);\n  }\n\n  // Generate a title from the first user message\n  generateTitle(messages) {\n    const firstUserMessage = messages.find(msg => msg.role === 'user');\n    if (firstUserMessage) {\n      const text = firstUserMessage.text;\n      return text.length > 50 ? text.substring(0, 50) + '...' : text;\n    }\n    return 'New Chat';\n  }\n\n  // Format timestamp for display\n  formatTimestamp(timestamp) {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diffInHours = (now - date) / (1000 * 60 * 60);\n\n    if (diffInHours < 1) {\n      return 'Just now';\n    } else if (diffInHours < 24) {\n      return `${Math.floor(diffInHours)}h ago`;\n    } else if (diffInHours < 168) { // 7 days\n      return `${Math.floor(diffInHours / 24)}d ago`;\n    } else {\n      return date.toLocaleDateString();\n    }\n  }\n\n  // Save a chat session\n  async saveSession(sessionData) {\n    try {\n      const response = await fetch(`${this.baseUrl}/sessions`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          title: sessionData.title || this.generateTitle(sessionData.messages),\n          messages: sessionData.messages || []\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const result = await response.json();\n      \n      if (result.success) {\n        console.log('✅ Session saved to backend:', result.session);\n        return result.session;\n      } else {\n        throw new Error(result.error || 'Failed to save session');\n      }\n    } catch (error) {\n      console.error('❌ Failed to save session to backend:', error);\n      // Fallback to localStorage\n      const id = sessionData.id || this.generateId();\n      const session = {\n        id,\n        title: sessionData.title || this.generateTitle(sessionData.messages),\n        type: sessionData.type || 'chat',\n        messages: sessionData.messages || [],\n        message_count: sessionData.messages ? sessionData.messages.length : 0,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n      };\n\n      const history = await this.getHistory();\n      history.unshift(session);\n      localStorage.setItem('gsu_chat_history', JSON.stringify(history));\n      \n      console.log('✅ Session saved to localStorage:', id);\n      return session;\n    }\n  }\n\n  // Get all chat sessions\n  async getHistory() {\n    try {\n      const response = await fetch(`${this.baseUrl}/sessions`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const result = await response.json();\n      \n      if (result.success) {\n        console.log('✅ History loaded from backend:', result.sessions.length, 'sessions');\n        return result.sessions;\n      } else {\n        throw new Error(result.error || 'Failed to load history');\n      }\n    } catch (error) {\n      console.error('❌ Failed to load history from backend:', error);\n      // Fallback to localStorage\n      const history = localStorage.getItem('gsu_chat_history');\n      const parsed = history ? JSON.parse(history) : [];\n      console.log('✅ History loaded from localStorage:', parsed.length, 'sessions');\n      return parsed;\n    }\n  }\n\n  // Get a specific session by ID\n  async getSession(sessionId) {\n    try {\n      const response = await fetch(`${this.baseUrl}/sessions/${sessionId}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const result = await response.json();\n      \n      if (result.success) {\n        console.log('✅ Session loaded from backend:', result.session.id);\n        return result.session;\n      } else {\n        throw new Error(result.error || 'Failed to load session');\n      }\n    } catch (error) {\n      console.error('❌ Failed to get session from backend:', error);\n      // Fallback to localStorage\n      const history = await this.getHistory();\n      return history.find(session => session.id === sessionId);\n    }\n  }\n\n  // Update a session\n  async updateSession(sessionId, updates) {\n    try {\n      const response = await fetch(`${this.baseUrl}/sessions/${sessionId}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(updates)\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const result = await response.json();\n      \n      if (result.success) {\n        console.log('✅ Session updated in backend:', sessionId);\n        return true;\n      } else {\n        throw new Error(result.error || 'Failed to update session');\n      }\n    } catch (error) {\n      console.error('❌ Failed to update session in backend:', error);\n      // Fallback to localStorage\n      const history = await this.getHistory();\n      const sessionIndex = history.findIndex(session => session.id === sessionId);\n      \n      if (sessionIndex > -1) {\n        history[sessionIndex] = { ...history[sessionIndex], ...updates };\n        localStorage.setItem('gsu_chat_history', JSON.stringify(history));\n        console.log('✅ Session updated in localStorage:', sessionId);\n        return true;\n      }\n      return false;\n    }\n  }\n\n  // Delete a session\n  async deleteSession(sessionId) {\n    try {\n      const response = await fetch(`${this.baseUrl}/sessions/${sessionId}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      const result = await response.json();\n      \n      if (result.success) {\n        console.log('✅ Session deleted from backend:', sessionId);\n        return true;\n      } else {\n        throw new Error(result.error || 'Failed to delete session');\n      }\n    } catch (error) {\n      console.error('❌ Failed to delete session from backend:', error);\n      // Fallback to localStorage\n      const history = await this.getHistory();\n      const filteredHistory = history.filter(session => session.id !== sessionId);\n      localStorage.setItem('gsu_chat_history', JSON.stringify(filteredHistory));\n      console.log('✅ Session deleted from localStorage:', sessionId);\n      return true;\n    }\n  }\n}\n\nexport default new ChatHistoryService();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}